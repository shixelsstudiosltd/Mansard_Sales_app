define(["jquery","backbone","marionette","underscore","handlebars","models/MansardAPI","models/MansardCart"],function($,e,n,r,t,a,o){function s(){var e=navigator.userAgent||navigator.vendor||window.opera;return/iPhone|iPod|iPad|Android|BlackBerry|Opera Mini|IEMobile/.test(e)}function i(e,n){var r=null;return $.ajax({url:"https://online.mansardinsurance.com/MansardSalesWebApi/api/Agent/Get?agentCode="+e+"&username="+n,type:"GET",async:!1,success:function(e){r=e.NeedsSalesDiary?!0:!1}}),r}var u=window.Mansard=new e.Marionette.Application;u.api=new a,u.cart=new o,u.discovery_questions=u.api.discovery_quesions(),u.tempProduct=!0,u.env="dev",u.customer=null,u.cart.current=0,u.tempPolicy=null,u.cart.last=u.cart.count()>0?u.cart.count()-1:0;var c={bodytype:"95",customer:"3100001014",img:"default_product.png",name:"MANSARD Motorvintage",paymentOptions:"3 Installments",pos:0,price:"135,000",product_class:3,product_id:50,product_type:1,qty:1,quote:"135,000",sumassured:"3000000",type:"motor",wholelife:0},l={bodytype:"1",customer:"3100001014",img:"default_product.png",name:"MANSARD Motorclassic",paymentOptions:"Full Payment",pos:1,price:"105,000",product_class:3,product_id:51,product_type:48,qty:1,quote:"105,000",sumassured:"3000000",type:"motor",wholelife:0};return u.cart.items=[c,l],null===localStorage.getItem("session")?(u.isLoggedIn=!1,u.currentUser=null,u.currentUser_SubAgentCode=null):(u.isLoggedIn=!0,u.current=JSON.parse(JSON.parse(JSON.parse(localStorage.getItem("session")).agent)),u.isFA=i(u.current.AgentCode,u.current.username),u.currentUser=JSON.parse(JSON.parse(JSON.parse(localStorage.getItem("session")).agent)).username,u.currentUser_SubAgentCode=null),u.addRegions({headerRegion:"#header-container",profileRegion:"#user-profile-container",mainAppRegion:"#right-area-container",fullAppRegion:"#page",navRegion:"#main-nav-container"}),u.addInitializer(function(){e.history.start()}),u.mobile=s(),u});