define(["jquery","backbone","marionette","underscore","handlebars","models/MansardAPI","models/MansardCart"],function($,e,n,r,a,t,o){function i(){var e=navigator.userAgent||navigator.vendor||window.opera;return/iPhone|iPod|iPad|Android|BlackBerry|Opera Mini|IEMobile/.test(e)}function s(e,n){var r=null;return $.ajax({url:"https://online.mansardinsurance.com/MansardSalesWebApi/api/Agent/Get?agentCode="+e+"&username="+n,type:"GET",async:!1,success:function(e){r=e.NeedsSalesDiary?!0:!1}}),r}var u=window.Mansard=new e.Marionette.Application;return u.api=new t,u.cart=new o,u.discovery_questions=u.api.discovery_quesions(),u.tempProduct=!1,u.env="dev",u.customer=null,u.cart.current=0,u.tempPolicy=null,u.discovery=null,u.cart.last=u.cart.count()>0?u.cart.count()-1:0,null===localStorage.getItem("session")?(u.isLoggedIn=!1,u.currentUser=null,u.currentUser_SubAgentCode=null):(u.isLoggedIn=!0,u.current=JSON.parse(JSON.parse(JSON.parse(localStorage.getItem("session")).agent)),u.isFA=s(u.current.AgentCode,u.current.username),u.currentUser=JSON.parse(JSON.parse(JSON.parse(localStorage.getItem("session")).agent)).username,u.currentUser_SubAgentCode=null),u.addRegions({headerRegion:"#header-container",profileRegion:"#user-profile-container",mainAppRegion:"#right-area-container",fullAppRegion:"#page",navRegion:"#main-nav-container"}),u.addInitializer(function(){e.history.start()}),u.mobile=i(),u});