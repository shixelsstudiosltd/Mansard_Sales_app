define(["Mansard","backbone","marionette","jquery","models/Model","hbs!templates/searchResult","views/QuickResultView"],function(t,e,s,$,r,a,i){return e.Marionette.ItemView.extend({template:a,model:null,result:null,quickResult:null,tempProduct:null,total:null,events:{"click .quick-open":"showQuickResult","click .quick-add":"addToCart"},initialize:function(t){if(this.result=t.result,window.Mansard.isFa){var e=this.result.FirstName+" "+this.result.LastName,s=this.result.Email,a=e,i=this.result.email,l=d+"[..]",u=n+"[..]";this.result.Fullname=l}else{var e=this.result.Fullname,s=this.result.email,n=s.substring(0,20),d=e.substring(0,12),a=this.result.Fullname,i=this.result.email,l=d+"[..]",u=n+"[..]";this.result.Fullname=l}(this.result.email||this.result.Email)&&(this.result.email=u),this.result.searchButton=window.Mansard.tempProduct?'<div class="search-result-button"><a href="#" class="btn btn-primary quick-add" data-user="1">Add</a></div>':'<div class="search-result-button"><a href="#" class="btn btn-primary quick-open" data-user="1">Open</a></div>',this.result.keepEmail=i,this.result.keepFullName=a,this.model=new r({result:this.result})},onRender:function(){this.$el=this.$el.children(),this.setElement(this.$el)},showQuickResult:function(t){t.preventDefault(),this.quickResult=this.result;var e=new i({quickResult:this.quickResult});this.renderQuickResult(e)},renderQuickResult:function(t){var e=".search-quick-result-container";$(e).html(t.render().el)},addToCart:function(t){t.preventDefault(),window.Mansard.tempProduct.customer=this.result.CustomerNo,window.Mansard.cart.add(window.Mansard.tempProduct),window.Mansard.cart.last=window.Mansard.cart.count()-1;for(var e=0;e<window.Mansard.cart.items.length;e++)window.Mansard.cart.items[e].pos=e;$(".mini-card-total-holder").html(window.Mansard.cart.total()),$(".cart-num").html(window.Mansard.cart.count()),window.Mansard.customer=this.result.CustomerNo,window.Mansard.appRouter.navigate("products",{trigger:!0})}})});